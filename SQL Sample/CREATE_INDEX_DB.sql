SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

DROP SCHEMA IF EXISTS Employee_Info;

CREATE SCHEMA IF NOT EXISTS Employee_Info CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci;

USE Employee_Info;

CREATE TABLE IF NOT EXISTS EMPLOYEE( 
	Fname VARCHAR(25) NOT NULL,
	Minit CHAR,
	Lname VARCHAR(50) NOT NULL,
	SSN CHAR(9) NOT NULL DEFAULT '888888880',
	Bdate DATE,
	Address VARCHAR(50),
	Sex CHAR,
	Salary DECIMAL(10, 2),
	Super_ssn CHAR(9) NOT NULL,
	Dno INT NOT NULL DEFAULT 1,
    UNIQUE INDEX IDX_Fname USING BTREE (Fname ASC) VISIBLE,
    INDEX IDX_SSN USING BTREE (SSN ASC) VISIBLE,
    INDEX IDX_Super_ssn USING BTREE (Super_ssn ASC) VISIBLE,
	CONSTRAINT PK_EMPLOYEE PRIMARY KEY (SSN),
    CONSTRAINT FK_EMPLOYEE FOREIGN KEY (Super_ssn) REFERENCES EMPLOYEE(SSN) ON DELETE CASCADE ON UPDATE CASCADE)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;

CREATE TABLE IF NOT EXISTS DEPARTMENT( 
	Dname VARCHAR(30) NOT NULL,
	Dnumber INT NOT NULL DEFAULT 1 CHECK(Dnumber > 0),
	Mgr_ssn CHAR(9) NOT NULL DEFAULT '888888821',
	Mgr_start_date DATE,
    UNIQUE INDEX IDX_Dnumber USING BTREE (Dnumber ASC) VISIBLE,
    INDEX IDX_Mgr_ssn USING BTREE (Mgr_ssn ASC) VISIBLE,
	CONSTRAINT PK_DEPARTMENT PRIMARY KEY (Dnumber),
	CONSTRAINT SK_DEPARTMENT_UNIQ UNIQUE (Dname),
	CONSTRAINT FK_DEPARTMENT FOREIGN KEY (Mgr_ssn) REFERENCES EMPLOYEE(SSN) ON DELETE CASCADE ON UPDATE CASCADE)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;

CREATE TABLE IF NOT EXISTS DEPT_LOCATIONS( 
	Dnumber INT NOT NULL,
	Dlocation VARCHAR(30) NOT NULL,
	CONSTRAINT PK_DEPT_LOCATIONS PRIMARY KEY (Dnumber, Dlocation),
	CONSTRAINT FK_DEPT_LOCATIONS FOREIGN KEY (Dnumber) REFERENCES DEPARTMENT(Dnumber) ON DELETE CASCADE ON UPDATE CASCADE)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;

CREATE TABLE IF NOT EXISTS PROJECT( 
	Pname VARCHAR(30) NOT NULL,
	Pnumber INT NOT NULL DEFAULT 0 CHECK(Pnumber > 0),
	Plocation VARCHAR(30),
	Dnum INT NOT NULL CHECK(Dnum > 0),
	UNIQUE INDEX IDX_Pnumber USING BTREE (Pnumber ASC) VISIBLE,
    INDEX IDX_Dnum USING BTREE (Dnum ASC) VISIBLE,
	CONSTRAINT PK_PROJECT PRIMARY KEY (Pnumber),
	CONSTRAINT SK_PROJECT_UNIQ UNIQUE (Pname),
	CONSTRAINT FK_PROJECT FOREIGN KEY (Dnum) REFERENCES DEPARTMENT(Dnumber) ON DELETE CASCADE ON UPDATE CASCADE)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;

CREATE TABLE IF NOT EXISTS WORKS_ON( 
	ESSN CHAR(9) NOT NULL,
	Pno INT NOT NULL,
	Hours DECIMAL(3, 1) NOT NULL,
    INDEX INDX_ESSN USING BTREE(ESSN ASC) VISIBLE,
	CONSTRAINT PK_WORKS_ON PRIMARY KEY (ESSN, Pno),
	CONSTRAINT FK_WORKS_ON FOREIGN KEY (ESSN) REFERENCES EMPLOYEE(SSN) ON DELETE CASCADE ON UPDATE CASCADE,
	CONSTRAINT FK_WORKS_ON_2 FOREIGN KEY (Pno) REFERENCES PROJECT(Pnumber) ON DELETE CASCADE ON UPDATE CASCADE)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;

CREATE TABLE IF NOT EXISTS DEPENDENT( 
	ESSN CHAR(9) NOT NULL,
	Dependent_name VARCHAR(15) NOT NULL,
	Sex CHAR,
	Bdate DATE,
	Relationship VARCHAR(8),
    UNIQUE INDEX IDX_Dependent_name USING BTREE (Dependent_name ASC) VISIBLE,
	CONSTRAINT PK_DEPENDENT PRIMARY KEY (ESSN, Dependent_name),
	CONSTRAINT FK_DEPENDENT FOREIGN KEY (ESSN) REFERENCES EMPLOYEE(SSN) ON DELETE CASCADE ON UPDATE CASCADE)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;
    
CREATE TABLE IF NOT EXISTS EMPLOYEE_TRAINING( 
    EmpSub_SSN CHAR(9) NOT NULL,
    Trg_Dept_Num INT NOT NULL,
	Subject_Code INT NOT NULL,
	Subject_Description VARCHAR(50),
	Start_Course DATE,
	UNIQUE INDEX IDX_Subject_Code USING BTREE (Subject_Code ASC) VISIBLE,
	CONSTRAINT PK_EMPLOYEE_TRAINING PRIMARY KEY (Subject_Code, EmpSub_SSN),
	CONSTRAINT FK_EMPLOYEE_TRAINING FOREIGN KEY (EmpSub_SSN) REFERENCES EMPLOYEE(SSN) ON DELETE CASCADE ON UPDATE CASCADE,
    CONSTRAINT FK_EMPLOYEE_DEPT_NUM FOREIGN KEY (Trg_Dept_Num) REFERENCES DEPARTMENT(Dnumber) ON DELETE CASCADE ON UPDATE CASCADE)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;

ALTER TABLE EMPLOYEE ADD CONSTRAINT FK_EMPLOYEE_DEPT FOREIGN KEY (Dno) REFERENCES DEPARTMENT(Dnumber) ON DELETE CASCADE ON UPDATE CASCADE;

INSERT INTO Employee VALUES('John', 'B', 'Smith', '123456789', '1975-05-11', '731 Fondren Houston TX, USA', 'M', 540000, '333433345', 5);
INSERT INTO Employee VALUES('Sumit', 'B', 'Lahiri', '123445789', '1975-05-11', '774 Hallway Houston TX, USA', 'M', 420000, '333433345', 4);
INSERT INTO Employee VALUES('Jennifer', 'S', 'Wallacia', '153445789', '1995-11-13', '841 Austin Houston TX, USA', 'F', 210000, '333455345', 4);
INSERT INTO Employee VALUES('Ramesh', 'K', 'Narayan', '666878444', '1981-10-05', '975 Fire Oak, Stanford, TX, USA', 'M', 154000, '888655559', 5);
INSERT INTO Employee VALUES('James', 'E', 'Borges', '888655559', '1969-07-22', '450 Stone Brook Aprt, Houston, TX, USA', 'M', 620000, '800000000', 2);
INSERT INTO Employee VALUES('Frankiee', 'T', 'Wong', '333455345', '1978-04-17', '638 Voss, Bellaire TX, USA', 'F', 630000, '800000000', 1);
INSERT INTO Employee VALUES('Joyce', 'B', 'Smith', '333433345', '1989-06-15', '5697 Ross Building, Bellaire, TX, USA', 'F', 320000, '888655559', 5);
INSERT INTO Employee VALUES('Gohen', 'Z', 'Zilvoski', '800000000', '1988-06-17', '5652 Rice Road, TX, USA', 'M', 1970000, '800000000', 1);
INSERT INTO Employee VALUES('Boyen', 'W', 'Taylor', '556955624', '1972-06-15', '5641 Hollton Aprt, TX, USA', 'M', 120000, '333433345', 1);
INSERT INTO Employee VALUES('Hayes', 'E', 'Smith', '222566634', '1961-08-22', '454 Princeton Aprt, Michigan, TX, USA', 'F', 920000, '800000000', 2);
INSERT INTO Employee VALUES('Milinda', 'W', 'Taylor', '556545624', '1973-06-17', '57 Walfort Aprt, Michigan, USA', 'M', 950000, '333433345', 3);
INSERT INTO Employee VALUES('Antony', 'E', 'Aklisdha', '222766634', '1965-07-22', '51 Houston Aprt, Houston, TX, USA', 'F', 20000, '800000000', 3);
SELECT * FROM Employee;

INSERT INTO Department VALUES('Computer Administration', 5, '333433345', '1992-02-15');
INSERT INTO Department VALUES('Research', 4, '153445789', '1997-04-19');
INSERT INTO Department VALUES('Human Resources', 3, '556545624', '1975-02-13');
INSERT INTO Department VALUES('Software Engineerning', 2, '222566634', '1972-04-24');
INSERT INTO Department VALUES('Special Admins', 1, '800000000', '1988-06-15');
SELECT * FROM Department;

INSERT INTO Dept_locations VALUES(1, 'Houston');
INSERT INTO Dept_locations VALUES(2, 'Houston');
INSERT INTO Dept_locations VALUES(3, 'Michigan');
INSERT INTO Dept_locations VALUES(4, 'Stanford');
INSERT INTO Dept_locations VALUES(5, 'Bellaire');
SELECT * FROM Dept_locations;

INSERT INTO Project VALUES('Google Compute Engine', 3544, 'Stanford', 4);
INSERT INTO Project VALUES('Google BigSQL Management', 7546, 'Bellaire', 5);
INSERT INTO Project VALUES('HireX Beta', 5669, 'Michigan', 3);
INSERT INTO Project VALUES('InterviewZoom Alpha Proto', 6199, 'Stanford', 3);
INSERT INTO Project VALUES('GCGC Collections Info', 3321, 'Houston', 1);
INSERT INTO Project VALUES('ReStructSQL', 8854, 'Houston', 1);
INSERT INTO Project VALUES('CodeToCode Alpha Release', 4456, 'Austin', 2);
INSERT INTO Project VALUES('HireX Proto Build', 4412, 'Houston', 2);
INSERT INTO Project VALUES('Google BigChain Engine', 7545, 'Stanford', 4);
SELECT * FROM Project;

INSERT INTO WORKS_ON VALUES('123456789', 7456, 72.2);
INSERT INTO WORKS_ON VALUES('888655559', 4456, 59.8);
INSERT INTO WORKS_ON VALUES('222766634', 5669, 45.2);
INSERT INTO WORKS_ON VALUES('222766634', 3544, 31.2);
INSERT INTO WORKS_ON VALUES('556955624', 3321, 35.7);
INSERT INTO WORKS_ON VALUES('666878444', 6199, 23.2);
INSERT INTO WORKS_ON VALUES('123445789', 8854, 53.8);
INSERT INTO WORKS_ON VALUES('333433345', 7456, 85.2);
INSERT INTO WORKS_ON VALUES('666878444', 7456, 41.2);
INSERT INTO WORKS_ON VALUES('333433345', 8854, 26.2);
INSERT INTO WORKS_ON VALUES('333455345', 8854, 58.8);
INSERT INTO WORKS_ON VALUES('222566634', 7454, 62.8);
INSERT INTO WORKS_ON VALUES('123445789', 4412, 21.8);
INSERT INTO WORKS_ON VALUES('888655559', 4412, 17.8);
INSERT INTO WORKS_ON VALUES('666878444', 5669, 19.2);
INSERT INTO WORKS_ON VALUES('556545624', 6619, 39.8);
INSERT INTO WORKS_ON VALUES('556955624', 3544, 69.2);
INSERT INTO WORKS_ON VALUES('800000000', 7454, 90.3);
INSERT INTO WORKS_ON VALUES('800000000', 3321, 62.8);
SELECT * FROM WORKS_ON;

INSERT INTO DEPENDENT VALUES('123456789', 'Rebeccka', 'F', '1993-12-11', 'Daughter');
INSERT INTO DEPENDENT VALUES('888655559', 'Theodore', 'M', '1994-11-16', 'Son');
INSERT INTO DEPENDENT VALUES('222766634', 'Joybance', 'M', '1989-10-16', 'Son');
INSERT INTO DEPENDENT VALUES('222766634', 'Lucy', 'F', '1969-10-16', 'Spouse');
INSERT INTO DEPENDENT VALUES('556955624', 'Alison', 'F', '1999-08-16', 'Daughter');
INSERT INTO DEPENDENT VALUES('333433345', 'Rebulina', 'F', '2003-06-17', 'Daughter');
INSERT INTO DEPENDENT VALUES('333455345', 'Jonny', 'M', '1997-11-13', 'Son');
INSERT INTO DEPENDENT VALUES('666878444', 'Eliza', 'F', '1997-03-09', 'Daughter');
INSERT INTO DEPENDENT VALUES('333455345', 'Alisha', 'F', '1989-08-16', 'Spouse');
INSERT INTO DEPENDENT VALUES('222566634', 'Elizabeth', 'F', '1979-11-16', 'Spouse');
INSERT INTO DEPENDENT VALUES('800000000', 'Pradipta', 'F', '1969-12-29', 'Mother');
SELECT * FROM DEPENDENT;

INSERT INTO EMPLOYEE_TRAINING VALUES('556545624', 2, 556988, 'Advanced Software Design', '2017-11-16');
INSERT INTO EMPLOYEE_TRAINING VALUES('888655559', 4, 756694, 'Machine Learning LSTM NLTK NLP Python', '2015-10-18');
INSERT INTO EMPLOYEE_TRAINING VALUES('666878444', 3, 881456, 'Software Design Agile Process', '2013-11-26');
INSERT INTO EMPLOYEE_TRAINING VALUES('222566634', 1, 562214, 'Entrepreneurship & Management', '2018-11-05');
INSERT INTO EMPLOYEE_TRAINING VALUES('123456789', 5, 852214, 'Social Engineering Practices','2016-05-29');
INSERT INTO EMPLOYEE_TRAINING VALUES('800000000', 5, 423698, 'Managerial Engineering Practices','2010-11-29');
SELECT * FROM EMPLOYEE_TRAINING;

SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
